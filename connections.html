<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Armani connections</title>

  <!-- Share previews -->
  <meta property="og:title" content="Armani connections" />
  <meta name="twitter:title" content="Armani connections" />
  <meta name="apple-mobile-web-app-title" content="Armani connections" />

  <style>
    :root{
      --bg:#ffffff;
      --text:#111111;
      --muted:#6b7280;

      /* NYT-ish Connections colors */
      --yellow:#f3d35b;
      --green:#a8d08d;
      --blue:#9bb7e0;
      --purple:#b6a1d8;

      --tile:#f5f5f5;
      --tileBorder:#e5e7eb;
      --tileSelected:#111111;

      --shadow: 0 8px 24px rgba(0,0,0,.08);
      --radius: 16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:var(--bg);
      color:var(--text);
    }

    .wrap{
      max-width: 560px;
      margin: 0 auto;
      padding: 18px 14px 28px;
    }

    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 14px;
    }

    h1{
      font-size: 22px;
      margin: 0;
      letter-spacing: .2px;
      line-height:1.2;
    }
    .sub{
      margin-top:6px;
      color:var(--muted);
      font-size: 13px;
      line-height:1.35;
    }

    .pillbar{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }

    button{
      appearance:none;
      border:1px solid var(--tileBorder);
      background:#fff;
      color:#111;
      padding: 10px 12px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 14px;
      line-height:1;
      box-shadow: 0 1px 0 rgba(0,0,0,.03);
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    button:active{ transform: translateY(1px); }
    button:disabled{
      opacity:.45;
      cursor:not-allowed;
    }

    .board{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 10px;
    }

    .tile{
      position:relative;
      border: 1px solid var(--tileBorder);
      background: var(--tile);
      border-radius: 14px;
      padding: 14px 10px;
      min-height: 56px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      font-weight: 800;
      letter-spacing: .3px;
      user-select:none;
      cursor:pointer;
      box-shadow: 0 1px 0 rgba(0,0,0,.04);
      transition: transform .05s ease, background .15s ease, border-color .15s ease, color .15s ease;
      -webkit-tap-highlight-color: transparent;
      text-transform: none;
    }
    .tile:active{ transform: scale(.99); }

    .tile.selected{
      background: #111;
      color:#fff;
      border-color:#111;
    }

    .tile.solved{
      cursor:default;
      color:#111;
      border-color: transparent;
      box-shadow: none;
    }

    .solvedRow{
      margin-top: 10px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .groupCard{
      border-radius: var(--radius);
      padding: 12px 14px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,.06);
    }
    .groupTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .groupName{
      font-weight: 900;
      letter-spacing:.2px;
    }
    .groupHint{
      margin-top: 8px;
      color:#111;
      font-weight: 650;
      font-size: 14px;
    }
    .groupWords{
      margin-top: 10px;
      color: rgba(0,0,0,.7);
      font-size: 13px;
      line-height:1.35;
    }
    .badge{
      font-size:12px;
      font-weight:800;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(0,0,0,.08);
    }

    .status{
      margin-top: 12px;
      min-height: 22px;
      font-size: 14px;
      color: var(--muted);
    }
    .status strong{ color:#111; }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(17,17,17,.92);
      color: #fff;
      padding: 10px 12px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 14px;
      letter-spacing: .2px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(-2px);
    }

    footer{
      margin-top: 18px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
      text-align:center;
    }

    /* Make tiles comfy on small phones */
    @media (max-width: 360px){
      .tile{ padding: 12px 8px; min-height: 52px; font-size: 14px; }
      button{ font-size: 13px; padding: 9px 11px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Armani connections</h1>
        <div class="sub">Find four groups of four. Tap tiles to select, then hit Submit.</div>
      </div>
      <div class="pillbar">
        <button id="shuffleBtn" title="Shuffle tiles">Shuffle</button>
        <button id="deselectBtn" title="Clear selection">Deselect</button>
        <button id="submitBtn" disabled title="Submit selection">Submit</button>
      </div>
    </header>

    <div id="solved" class="solvedRow"></div>

    <div id="board" class="board" aria-label="Connections grid"></div>

    <div id="status" class="status"></div>

    <footer>
      Share this link with friends. (Tip: host on GitHub Pages â†’ Settings â†’ Pages â†’ Deploy from branch.)
    </footer>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // --- Puzzle data (your exact answers) ---
    const GROUPS = [
      {
        difficulty: "Easy",
        colorVar: "--yellow",
        hint: "Synonyms for a malted beverage",
        words: ["Beer","Brew","Pint","Bev"]
      },
      {
        difficulty: "Medium",
        colorVar: "--green",
        hint: "Components of our OG gamertags",
        words: ["Stealth","Crust","Fractal","Hawk"]
      },
      {
        difficulty: "Hard",
        colorVar: "--blue",
        hint: "Gun components",
        words: ["Can","Optic","Brace","Shroud"]
      },
      {
        difficulty: "Extra Hard",
        colorVar: "--purple",
        hint: "Things Armani fumbles",
        words: ["Ellie","Football","Siege Round","Chess Game"]
      }
    ];

    // Build quick lookup: word -> group index
    const wordToGroup = new Map();
    GROUPS.forEach((g, gi) => g.words.forEach(w => wordToGroup.set(w, gi)));

    // --- State ---
    let tiles = [];              // active unsolved tile words
    let selected = new Set();    // selected words
    let solvedGroups = new Set();// group indices solved

    // --- Elements ---
    const boardEl = document.getElementById("board");
    const solvedEl = document.getElementById("solved");
    const statusEl = document.getElementById("status");
    const shuffleBtn = document.getElementById("shuffleBtn");
    const deselectBtn = document.getElementById("deselectBtn");
    const submitBtn = document.getElementById("submitBtn");
    const toastEl = document.getElementById("toast");

    // --- Helpers ---
    function cssVar(name){
      return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
    }

    function shuffle(arr){
      for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      setTimeout(() => toastEl.classList.remove("show"), 1200);
    }

    function updateButtons(){
      submitBtn.disabled = selected.size !== 4;
      deselectBtn.disabled = selected.size === 0;
    }

    function setStatus(html){
      statusEl.innerHTML = html || "";
    }

    function resetSelection(){
      selected.clear();
      renderBoard();
      updateButtons();
    }

    // --- Rendering ---
    function renderSolved(){
      solvedEl.innerHTML = "";
      // Show solved groups in the classic order: Easy -> Medium -> Hard -> Extra Hard
      GROUPS.forEach((g, gi) => {
        if(!solvedGroups.has(gi)) return;

        const card = document.createElement("div");
        card.className = "groupCard";
        card.style.background = cssVar(g.colorVar);

        const top = document.createElement("div");
        top.className = "groupTop";

        const name = document.createElement("div");
        name.className = "groupName";
        name.textContent = g.difficulty;

        const badge = document.createElement("div");
        badge.className = "badge";
        badge.textContent = "Solved";

        top.appendChild(name);
        top.appendChild(badge);

        const hint = document.createElement("div");
        hint.className = "groupHint";
        hint.textContent = g.hint;

        const words = document.createElement("div");
        words.className = "groupWords";
        words.textContent = g.words.join(" â€¢ ");

        card.appendChild(top);
        card.appendChild(hint);
        card.appendChild(words);

        solvedEl.appendChild(card);
      });
    }

    function renderBoard(){
      boardEl.innerHTML = "";

      tiles.forEach(word => {
        const btn = document.createElement("div");
        btn.className = "tile";
        btn.textContent = word;

        if(selected.has(word)) btn.classList.add("selected");

        btn.addEventListener("click", () => {
          if(selected.has(word)){
            selected.delete(word);
          } else {
            if(selected.size >= 4){
              toast("Only 4 tiles!");
              return;
            }
            selected.add(word);
          }
          renderBoard();
          updateButtons();
          setStatus(selected.size ? `<strong>${selected.size}</strong> selected` : "");
        });

        boardEl.appendChild(btn);
      });
    }

    function init(){
      // Flatten all words
      tiles = GROUPS.flatMap(g => g.words.slice());
      shuffle(tiles);

      selected.clear();
      solvedGroups.clear();

      renderSolved();
      renderBoard();
      updateButtons();
      setStatus("");
    }

    // --- Game logic ---
    function selectionGroupIndices(){
      const inds = new Set();
      for(const w of selected){
        inds.add(wordToGroup.get(w));
      }
      return inds;
    }

    function submit(){
      if(selected.size !== 4) return;

      const inds = selectionGroupIndices();
      if(inds.size === 1){
        const gi = [...inds][0];
        if(solvedGroups.has(gi)){
          toast("Already solved!");
          resetSelection();
          return;
        }

        // Mark solved: remove those tiles from board, reveal hint card
        solvedGroups.add(gi);
        const solvedWords = new Set(GROUPS[gi].words);

        tiles = tiles.filter(w => !solvedWords.has(w));

        renderSolved();
        resetSelection();

        // Show hint upon correct guess (toast + status)
        toast("Correct!");
        setStatus(`<strong>${GROUPS[gi].difficulty}</strong>: ${GROUPS[gi].hint}`);

        // If complete
        if(solvedGroups.size === 4){
          toast("You win!");
          setStatus("All groups solved ðŸŽ‰");
        }
      } else {
        toast("Not a group");
        setStatus("Try again.");
        // Keep selection (NYT style) or clearâ€”here we keep it to feel fair
      }
    }

    // --- Controls ---
    shuffleBtn.addEventListener("click", () => {
      shuffle(tiles);
      renderBoard();
      toast("Shuffled");
    });

    deselectBtn.addEventListener("click", () => {
      resetSelection();
      setStatus("");
    });

    submitBtn.addEventListener("click", submit);

    // Nice-to-have: double tap empty space to deselect on mobile
    document.addEventListener("keydown", (e) => {
      if(e.key === "Enter") submit();
      if(e.key === "Escape") { resetSelection(); setStatus(""); }
    });

    init();
  </script>
</body>
</html>
